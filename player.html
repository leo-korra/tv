<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LeoTV Player</title>

<!-- Ù…ÙƒØªØ¨Ø© Clappr Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© -->
<script src="https://cdn.jsdelivr.net/clappr/latest/clappr.min.js"></script>

<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body, html {
  width: 100%;
  height: 100%;
  background: #000;
  font-family: Arial, sans-serif;
  overflow: hidden;
}

#player-container {
  width: 100%;
  height: 100%;
  position: relative;
}

#player {
  width: 100%;
  height: 100%;
}

/* Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ */
#loading {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: #000;
  color: white;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  text-align: center;
  padding: 20px;
}

.spinner {
  width: 50px;
  height: 50px;
  border: 5px solid #333;
  border-top: 5px solid #f00;
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin-bottom: 20px;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* Ø´Ø±ÙŠØ· Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø¹Ù„ÙˆÙŠ */
.player-header {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  background: rgba(0, 0, 0, 0.8);
  color: white;
  padding: 15px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  z-index: 100;
  box-sizing: border-box;
}

.channel-info {
  display: flex;
  align-items: center;
  gap: 15px;
}

.channel-logo {
  width: 40px;
  height: 40px;
  background: #333;
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 20px;
  color: #fff;
}

.channel-name {
  font-size: 18px;
  font-weight: bold;
}

.controls {
  display: flex;
  gap: 10px;
}

.control-btn {
  background: rgba(255, 255, 255, 0.2);
  border: none;
  color: white;
  padding: 8px 15px;
  border-radius: 5px;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 5px;
}

.control-btn:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* Ø´Ø§Ø´Ø© Ø§Ù„Ø®Ø·Ø£ */
.error-screen {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: #000;
  color: white;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  text-align: center;
  padding: 20px;
  display: none;
}

.error-icon {
  font-size: 60px;
  color: #f00;
  margin-bottom: 20px;
}

.error-title {
  font-size: 24px;
  margin-bottom: 15px;
  color: #fff;
}

.error-message {
  font-size: 16px;
  color: #ccc;
  margin-bottom: 10px;
  line-height: 1.6;
  max-width: 600px;
}

.solution-box {
  background: rgba(255, 0, 0, 0.1);
  border: 1px solid rgba(255, 0, 0, 0.3);
  border-radius: 10px;
  padding: 15px;
  margin: 20px 0;
  max-width: 600px;
  text-align: right;
}

.solution-box h3 {
  color: #fff;
  margin-bottom: 10px;
  text-align: right;
}

.solution-box ol {
  padding-right: 20px;
  text-align: right;
}

.solution-box li {
  margin-bottom: 8px;
  color: #ddd;
}

.error-buttons {
  display: flex;
  gap: 10px;
  margin-top: 20px;
  flex-wrap: wrap;
  justify-content: center;
}

.error-btn {
  background: #f00;
  color: white;
  border: none;
  padding: 12px 25px;
  border-radius: 8px;
  cursor: pointer;
  font-size: 16px;
  transition: all 0.3s;
  min-width: 180px;
}

.error-btn:hover {
  background: #c00;
  transform: translateY(-2px);
}

.error-btn.secondary {
  background: #333;
}

.error-btn.secondary:hover {
  background: #444;
}

/* Ø´Ø±ÙŠØ· Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª */
.info-bar {
  position: absolute;
  bottom: 10px;
  left: 10px;
  right: 10px;
  background: rgba(0, 0, 0, 0.7);
  color: white;
  padding: 10px;
  border-radius: 5px;
  font-size: 12px;
  text-align: center;
  z-index: 100;
  display: none;
}

/* Ø¥ØµÙ„Ø§Ø­Ø§Øª Clappr */
.clappr-watermark {
  width: 40px !important;
  height: auto !important;
  position: absolute !important;
  left: 10px !important;
  bottom: 10px !important;
  z-index: 999999 !important;
  opacity: 0.8 !important;
}
</style>
</head>

<body>

<div id="player-container">
  <!-- Ø´Ø±ÙŠØ· Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø¹Ù„ÙˆÙŠ -->
  <div class="player-header">
    <div class="channel-info">
      <div class="channel-logo" id="channel-logo">TV</div>
      <div>
        <div class="channel-name" id="channel-name">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
        <div style="font-size: 12px; color: #ccc;" id="channel-info">Leo TV Player</div>
      </div>
    </div>
    
    <div class="controls">
      <button class="control-btn" onclick="toggleFullscreen()">
        <span id="fullscreen-text">Ù…Ù„Ø¡ Ø§Ù„Ø´Ø§Ø´Ø©</span>
      </button>
      <button class="control-btn" onclick="goBack()">
        <span>Ø§Ù„Ø¹ÙˆØ¯Ø©</span>
      </button>
    </div>
  </div>
  
  <!-- Ø§Ù„Ù…Ø´ØºÙ„ -->
  <div id="player"></div>
  
  <!-- Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ -->
  <div id="loading">
    <div class="spinner"></div>
    <h2 id="loading-title">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚Ù†Ø§Ø©...</h2>
    <p id="loading-message">ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</p>
    <div id="progress-info" style="margin-top: 20px; font-size: 14px; color: #888;"></div>
  </div>
  
  <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ø®Ø·Ø£ -->
  <div id="error-screen" class="error-screen">
    <div class="error-icon">âš ï¸</div>
    <h2 class="error-title" id="error-title">Ø¹Ø°Ø±Ø§Ù‹! ØªØ¹Ø°Ø± ØªØ´ØºÙŠÙ„ Ø§Ù„Ù‚Ù†Ø§Ø©</h2>
    
    <div class="error-message" id="error-message">
      <p>Ø§Ù„Ù‚Ù†Ø§Ø©: <strong id="error-channel">beIN SPORT 1</strong></p>
      <p>Ø§Ù„Ù…Ø´ÙƒÙ„Ø©: <strong id="error-problem">ØºÙŠØ± Ù‚Ø§Ø¯Ø± Ø¹Ù„Ù‰ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨Ø«</strong></p>
    </div>
    
    <div class="solution-box">
      <h3>ğŸ¯ Ø§Ù„Ø­Ù„ÙˆÙ„ Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø©:</h3>
      <ol>
        <li><strong>Ø­Ù„ ÙÙˆØ±ÙŠ:</strong> Ø§ÙØªØ­ Ù‡Ø°Ø§ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¹Ù„Ù‰ <a href="#" id="http-link" style="color: #4CAF50;">Ù†Ø³Ø®Ø© HTTP</a> Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† HTTPS</li>
        <li><strong>Ø¨Ø¯ÙŠÙ„:</strong> Ø§Ø³ØªØ®Ø¯Ù… Ù…ØªØµÙØ­ <strong>Mozilla Firefox</strong> ÙÙ‡Ùˆ ÙŠØ¯Ø¹Ù… HTTP Ø¹Ù„Ù‰ HTTPS</li>
        <li><strong>Ù„Ù„Ù…Ø·ÙˆØ±ÙŠÙ†:</strong> Ø§Ø³ØªØ®Ø¯Ù… <a href="https://www.netlify.com/" target="_blank" style="color: #00B4D8;">Netlify</a> Ø£Ùˆ <a href="https://vercel.com/" target="_blank" style="color: #000;">Vercel</a> Ù„Ù„Ø§Ø³ØªØ¶Ø§ÙØ©</li>
        <li><strong>Ø§Ø®ØªØ¨Ø§Ø±:</strong> Ø¬Ø±Ø¨ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø²Ùƒ Ù…Ø­Ù„ÙŠØ§Ù‹ (Ø³ÙŠØ¹Ù…Ù„ 100%)</li>
        <li><strong>Ù…ØªÙ‚Ø¯Ù…:</strong> Ø£Ø¶Ù Ø¥Ø¶Ø§ÙØ© CORS Ù„Ù„Ù…ØªØµÙØ­ Ù…Ø«Ù„ <em>"Allow CORS"</em></li>
      </ol>
    </div>
    
    <div class="error-buttons">
      <button class="error-btn" onclick="retryPlayback()">
        ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©
      </button>
      <button class="error-btn secondary" onclick="tryAnotherLink()">
        ğŸ“º ØªØ¬Ø±Ø¨Ø© Ø±Ø§Ø¨Ø· Ø¢Ø®Ø±
      </button>
      <button class="error-btn secondary" onclick="goBack()">
        â†© Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø©
      </button>
      <button class="error-btn secondary" onclick="openInFirefox()">
        ğŸ¦Š ÙØªØ­ ÙÙŠ Firefox
      </button>
    </div>
    
    <div style="margin-top: 30px; font-size: 12px; color: #666;">
      <p>Ù…Ø¹Ù„ÙˆÙ…Ø©: GitHub Pages ÙŠÙØ±Ø¶ HTTPS Ù…Ù…Ø§ ÙŠÙ…Ù†Ø¹ ØªØ´ØºÙŠÙ„ Ø±ÙˆØ§Ø¨Ø· HTTP (Mixed Content Policy)</p>
      <p id="tech-info" style="font-family: monospace; margin-top: 5px;"></p>
    </div>
  </div>
  
  <!-- Ø´Ø±ÙŠØ· Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª -->
  <div class="info-bar" id="info-bar"></div>
</div>

<script>
// ============================================
// Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø©
// ============================================
let player = null;
let currentStreamIndex = 0;
let streamSources = [];
let retryCount = 0;
const MAX_RETRIES = 3;

// ============================================
// Ø±ÙˆØ§Ø¨Ø· Ù‚Ù†ÙˆØ§Øª Ø¨Ø¯ÙŠÙ„Ø© (Ù…Ø®ØªØ¨Ø±Ø©)
// ============================================
const STREAM_SOURCES = {
  "beIN SPORT 1": [
    "https://ab.footballii.ir/hls2/bein1_src.m3u8",
    "https://raw.githubusercontent.com/futbolprofeta/links/main/bein1.m3u8",
    "https://wo.cma.footballii.ir/90live/token/Ke2TKW7sAs5LVXkl3f0j3A/1765397156/bein1_src.m3u8",
    "http://fuego-iptv.net/play/live.php?mac=00:1A:79:CB:46:ED&stream=1269943&extension=m3u8",
    "https://mn-nl.mncdn.com/blutv/bein1/chunklist.m3u8"
  ],
  "beIN SPORT 2": [
    "http://cdn.elsalvadordigital.com:1935/wowza5/ngrp:bein2.stream_all/playlist.m3u8",
    "http://161.97.145.137:25461/live/borasport/bora/4.m3u8",
    "https://bit.ly/bein2-hls"
  ],
  "beIN SPORT 3": [
    "http://cdn.elsalvadordigital.com:1935/wowza5/ngrp:bein3.stream_all/playlist.m3u8",
    "http://161.97.145.137:25461/live/borasport/bora/5.m3u8",
    "https://bit.ly/bein3-hls"
  ],
  "beIN SPORT 4": [
    "http://cdn.elsalvadordigital.com:1935/wowza5/ngrp:bein4.stream_all/playlist.m3u8",
    "http://161.97.145.137:25461/live/borasport/bora/6.m3u8",
    "https://bit.ly/bein4-hls"
  ]
};

// ============================================
// Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‚Ù†Ø§Ø© Ù…Ù† URL
// ============================================
function getUrlParams() {
  const params = new URLSearchParams(window.location.search);
  return {
    url: decodeURIComponent(params.get('url') || ''),
    name: decodeURIComponent(params.get('name') || 'Ù‚Ù†Ø§Ø© ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙØ©'),
    logo: decodeURIComponent(params.get('logo') || ''),
    group: decodeURIComponent(params.get('group') || 'beIN Sports'),
    quality: decodeURIComponent(params.get('quality') || 'HD')
  };
}

const { url, name, logo, group, quality } = getUrlParams();

// ============================================
// ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØµÙØ­Ø©
// ============================================
function initPage() {
  // ØªØ­Ø¯ÙŠØ« Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù‚Ù†Ø§Ø©
  document.getElementById('channel-name').textContent = name;
  document.getElementById('channel-info').textContent = `${group} â€¢ ${quality}`;
  document.getElementById('error-channel').textContent = name;
  document.title = `${name} - Leo TV`;
  
  // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø±Ø§Ø¨Ø· HTTP
  const httpLink = document.getElementById('http-link');
  if (httpLink) {
    const httpUrl = window.location.href.replace('https://', 'http://');
    httpLink.href = httpUrl;
    httpLink.textContent = httpUrl;
  }
  
  // Ø¹Ø±Ø¶ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ØªÙ‚Ù†ÙŠØ©
  document.getElementById('tech-info').textContent = 
    `Ø§Ù„Ù…ØªØµÙØ­: ${navigator.userAgent.split(' ')[0]} | HTTPS: ${window.location.protocol === 'https:'}`;
  
  // Ø¥Ø¹Ø¯Ø§Ø¯ Ù…ØµØ§Ø¯Ø± Ø§Ù„Ø¨Ø«
  streamSources = [url];
  if (STREAM_SOURCES[name]) {
    streamSources = [...streamSources, ...STREAM_SOURCES[name]];
  }
  
  // Ø¨Ø¯Ø¡ Ø§Ù„ØªØ´ØºÙŠÙ„
  startPlayback();
}

// ============================================
// ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¨Ø«
// ============================================
function startPlayback() {
  const streamUrl = streamSources[currentStreamIndex];
  
  // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
  document.getElementById('loading-message').textContent = 
    `Ø¬Ø§Ø±ÙŠ ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ø±Ø§Ø¨Ø· ${currentStreamIndex + 1} Ù…Ù† ${streamSources.length}`;
  document.getElementById('progress-info').textContent = 
    `Ø§Ù„Ø±Ø§Ø¨Ø·: ${streamUrl.substring(0, 50)}...`;
  
  // ØªØ¯Ù…ÙŠØ± Ø§Ù„Ù…Ø´ØºÙ„ Ø§Ù„Ø³Ø§Ø¨Ù‚
  if (player) {
    player.destroy();
  }
  
  // Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø´ØºÙ„ Ø¬Ø¯ÙŠØ¯
  try {
    player = new Clappr.Player({
      source: streamUrl,
      autoPlay: true,
      height: '100%',
      width: '100%',
      parentId: '#player',
      mute: false,
      volume: 70,
      watermark: 'https://i.imgur.com/6QyTLyj.png',
      position: 'bottom-left',
      watermarkLink: '#',
      mediacontrol: {
        seekbar: '#FF0000',
        buttons: '#FFFFFF'
      },
      playbackNotSupportedMessage: 'Ø§Ù„Ù…ØªØµÙØ­ Ø§Ù„Ø­Ø§Ù„ÙŠ Ù„Ø§ ÙŠØ¯Ø¹Ù… ØªØ´ØºÙŠÙ„ Ù‡Ø°Ø§ Ø§Ù„Ù†ÙˆØ¹ Ù…Ù† Ø§Ù„Ø¨Ø«'
    });
    
    // Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ù…Ø´ØºÙ„
    player.on('ready', () => {
      console.log('Ø§Ù„Ù…Ø´ØºÙ„ Ø¬Ø§Ù‡Ø²');
      document.getElementById('loading').style.display = 'none';
      document.getElementById('info-bar').textContent = 
        `Ø§Ù„Ù‚Ù†Ø§Ø©: ${name} | Ø§Ù„Ø­Ø§Ù„Ø©: Ù…Ø¨Ø§Ø´Ø± | Ø§Ù„Ø¬ÙˆØ¯Ø©: ${quality}`;
      document.getElementById('info-bar').style.display = 'block';
    });
    
    player.on('play', () => {
      console.log('Ø¨Ø¯Ø£ Ø§Ù„ØªØ´ØºÙŠÙ„');
      document.getElementById('loading').style.display = 'none';
    });
    
    player.on('error', (error) => {
      console.error('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù…Ø´ØºÙ„:', error);
      handlePlaybackError();
    });
    
    player.on('buffering', () => {
      document.getElementById('loading').style.display = 'flex';
      document.getElementById('loading-title').textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...';
    });
    
    // Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªØ´ØºÙŠÙ„ Ø¨Ø¹Ø¯ 5 Ø«ÙˆØ§Ù†ÙŠ
    setTimeout(() => {
      if (document.getElementById('loading').style.display !== 'none') {
        handlePlaybackError();
      }
    }, 5000);
    
  } catch (error) {
    console.error('Ø®Ø·Ø£ ÙÙŠ ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù…Ø´ØºÙ„:', error);
    handlePlaybackError();
  }
}

// ============================================
// Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡
// ============================================
function handlePlaybackError() {
  retryCount++;
  
  if (retryCount <= MAX_RETRIES) {
    // Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©
    document.getElementById('loading-message').textContent = 
      `Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© ${retryCount} Ù…Ù† ${MAX_RETRIES}...`;
    setTimeout(startPlayback, 1000);
    return;
  }
  
  // Ø¥Ø°Ø§ ÙØ´Ù„Øª Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª
  if (currentStreamIndex < streamSources.length - 1) {
    // ØªØ¬Ø±Ø¨Ø© Ø±Ø§Ø¨Ø· Ø¢Ø®Ø±
    currentStreamIndex++;
    retryCount = 0;
    document.getElementById('loading-message').textContent = 
      `Ø¬Ø§Ø±ÙŠ ØªØ¬Ø±Ø¨Ø© Ø±Ø§Ø¨Ø· Ø¢Ø®Ø±...`;
    setTimeout(startPlayback, 500);
  } else {
    // ÙØ´Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø±ÙˆØ§Ø¨Ø·
    showError('ÙØ´Ù„ ØªØ´ØºÙŠÙ„ Ø§Ù„Ù‚Ù†Ø§Ø©. Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· ØºÙŠØ± Ù…ØªØ§Ø­Ø©.');
  }
}

// ============================================
// Ø¹Ø±Ø¶ Ø´Ø§Ø´Ø© Ø§Ù„Ø®Ø·Ø£
// ============================================
function showError(message) {
  document.getElementById('loading').style.display = 'none';
  document.getElementById('error-problem').textContent = message;
  document.getElementById('error-screen').style.display = 'flex';
  
  // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù…Ø´ØºÙ„
  if (player) {
    player.destroy();
    player = null;
  }
}

// ============================================
// ÙˆØ¸Ø§Ø¦Ù Ø§Ù„ØªØ­ÙƒÙ…
// ============================================
function retryPlayback() {
  retryCount = 0;
  document.getElementById('error-screen').style.display = 'none';
  document.getElementById('loading').style.display = 'flex';
  startPlayback();
}

function tryAnotherLink() {
  if (currentStreamIndex < streamSources.length - 1) {
    currentStreamIndex++;
    retryCount = 0;
    document.getElementById('error-screen').style.display = 'none';
    document.getElementById('loading').style.display = 'flex';
    startPlayback();
  } else {
    alert('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø±ÙˆØ§Ø¨Ø· Ø£Ø®Ø±Ù‰ Ù…ØªØ§Ø­Ø© Ù„Ù‡Ø°Ù‡ Ø§Ù„Ù‚Ù†Ø§Ø©.');
  }
}

function openInFirefox() {
  const firefoxUrl = `firefox:${window.location.href}`;
  window.open(firefoxUrl, '_blank');
}

function toggleFullscreen() {
  const elem = document.getElementById('player-container');
  
  if (!document.fullscreenElement) {
    if (elem.requestFullscreen) elem.requestFullscreen();
    else if (elem.webkitRequestFullscreen) elem.webkitRequestFullscreen();
    else if (elem.msRequestFullscreen) elem.msRequestFullscreen();
    
    document.getElementById('fullscreen-text').textContent = 'ØªØµØºÙŠØ±';
  } else {
    if (document.exitFullscreen) document.exitFullscreen();
    else if (document.webkitExitFullscreen) document.webkitExitFullscreen();
    else if (document.msExitFullscreen) document.msExitFullscreen();
    
    document.getElementById('fullscreen-text').textContent = 'Ù…Ù„Ø¡ Ø§Ù„Ø´Ø§Ø´Ø©';
  }
}

function goBack() {
  if (window.opener && !window.opener.closed) {
    window.close();
  } else if (window.history.length > 1) {
    window.history.back();
  } else {
    // Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
    window.location.href = window.location.href.replace('player.html', 'index.html');
  }
}

// ============================================
// Ø£Ø­Ø¯Ø§Ø« Ø§Ù„ØµÙØ­Ø©
// ============================================
document.addEventListener('DOMContentLoaded', initPage);

// Ø£Ø­Ø¯Ø§Ø« Ù…Ù„Ø¡ Ø§Ù„Ø´Ø§Ø´Ø©
document.addEventListener('fullscreenchange', () => {
  const isFullscreen = !!document.fullscreenElement;
  document.getElementById('fullscreen-text').textContent = isFullscreen ? 'ØªØµØºÙŠØ±' : 'Ù…Ù„Ø¡ Ø§Ù„Ø´Ø§Ø´Ø©';
});

// Ø£Ø­Ø¯Ø§Ø« Ø§ØªØµØ§Ù„ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª
window.addEventListener('online', () => {
  console.log('Ø§ØªØµØ§Ù„ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª Ù…ØªØ§Ø­');
  if (player && !player.isPlaying()) {
    player.play();
  }
});

window.addEventListener('offline', () => {
  console.log('ÙÙ‚Ø¯ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª');
  showError('ÙÙ‚Ø¯ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§ØªØµØ§Ù„Ùƒ.');
});
</script>

</body>
</html>
