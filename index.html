<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ“º Leo TV - Ù…Ù†ØµØ© IPTV Ù…ØªØ·ÙˆØ±Ø©</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
:root {
  --primary: #2563eb;
  --primary-dark: #1d4ed8;
  --secondary: #7c3aed;
  --accent: #ec4899;
  --glass-bg: rgba(255, 255, 255, 0.08);
  --glass-border: rgba(255, 255, 255, 0.12);
  --blur: blur(15px);
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: 'Cairo', sans-serif;
  background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
  padding: 15px;
  min-height: 100vh;
  overflow-x: hidden;
}

body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: 
    radial-gradient(circle at 20% 80%, rgba(37, 99, 235, 0.2) 0%, transparent 50%),
    radial-gradient(circle at 80% 20%, rgba(124, 58, 237, 0.2) 0%, transparent 50%);
  z-index: -1;
}

.glass-panel {
  background: var(--glass-bg);
  backdrop-filter: var(--blur);
  -webkit-backdrop-filter: var(--blur);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
}

.header {
  text-align: center;
  padding: 20px;
  margin-bottom: 15px;
}

.header h1 {
  font-size: 2.2rem;
  background: linear-gradient(135deg, #fff 0%, #a5b4fc 100%);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  margin-bottom: 8px;
  text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
}

.subtitle {
  color: rgba(255, 255, 255, 0.8);
  font-size: 0.9rem;
}

.search-section {
  margin-bottom: 15px;
  padding: 15px;
}

.search-box {
  width: 100%;
  padding: 14px 20px;
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  font-family: 'Cairo', sans-serif;
  font-size: 15px;
  color: white;
  outline: none;
  transition: all 0.3s ease;
}

.search-box::placeholder {
  color: rgba(255, 255, 255, 0.6);
}

.search-box:focus {
  background: rgba(255, 255, 255, 0.15);
  border: 2px solid var(--primary);
  box-shadow: 0 0 15px rgba(37, 99, 235, 0.3);
}

.filter-buttons {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  margin-bottom: 15px;
  justify-content: center;
}

.filter-btn {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.15);
  color: rgba(255, 255, 255, 0.9);
  padding: 10px 20px;
  border-radius: 12px;
  cursor: pointer;
  font-family: 'Cairo', sans-serif;
  font-weight: 600;
  font-size: 0.85rem;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  gap: 8px;
}

.filter-btn:hover {
  background: rgba(255, 255, 255, 0.15);
}

.filter-btn.active {
  background: var(--primary);
  border-color: transparent;
  box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
}

.channels-section {
  padding: 15px;
}

.channels-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 15px;
}

.channel-card {
  background: rgba(255, 255, 255, 0.05);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 14px;
  padding: 18px;
  cursor: pointer;
  transition: all 0.3s ease;
  position: relative;
  min-height: 140px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

.channel-card:hover {
  background: rgba(255, 255, 255, 0.08);
  border-color: rgba(255, 255, 255, 0.2);
  transform: translateY(-3px);
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
}

.channel-card.focused {
  background: rgba(37, 99, 235, 0.15);
  border: 2px solid var(--primary);
  transform: scale(1.02);
  box-shadow: 0 0 20px rgba(37, 99, 235, 0.4);
}

.channel-logo {
  width: 55px;
  height: 55px;
  object-fit: contain;
  border-radius: 10px;
  margin-bottom: 10px;
  background: rgba(255, 255, 255, 0.1);
  padding: 8px;
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.channel-name {
  font-weight: 700;
  color: white;
  font-size: 0.95rem;
  text-align: center;
  margin-bottom: 5px;
}

.channel-info {
  font-size: 0.75rem;
  color: rgba(255, 255, 255, 0.6);
  text-align: center;
}

.quality-badge {
  position: absolute;
  top: 10px;
  left: 10px;
  background: var(--primary);
  color: white;
  padding: 4px 8px;
  border-radius: 6px;
  font-size: 0.65rem;
  font-weight: 700;
}

.live-badge {
  position: absolute;
  top: 10px;
  right: 10px;
  background: var(--accent);
  color: white;
  padding: 4px 8px;
  border-radius: 6px;
  font-size: 0.65rem;
  font-weight: 700;
}

/* Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¬ÙˆØ¯Ø© Ø¯Ø§Ø®Ù„ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© */
.quality-selector {
  margin-top: 15px;
  width: 100%;
  display: flex;
  gap: 8px;
  justify-content: center;
}

.quality-btn {
  flex: 1;
  padding: 8px 5px;
  background: rgba(255, 255, 255, 0.07);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 8px;
  color: rgba(255, 255, 255, 0.9);
  font-family: 'Cairo', sans-serif;
  font-weight: 600;
  font-size: 0.8rem;
  cursor: pointer;
  transition: all 0.3s ease;
  text-align: center;
}

.quality-btn:hover {
  background: rgba(255, 255, 255, 0.12);
  transform: translateY(-2px);
}

.quality-btn.active {
  background: var(--primary);
  border-color: transparent;
  color: white;
  box-shadow: 0 4px 8px rgba(37, 99, 235, 0.3);
}

.quality-btn.SD.active {
  background: #10b981;
}

.quality-btn.HD.active {
  background: var(--primary);
}

.quality-btn.FHD.active {
  background: var(--secondary);
}

.group-header {
  grid-column: 1 / -1;
  font-size: 1.3rem;
  font-weight: 700;
  margin: 25px 0 15px;
  padding-bottom: 10px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.2);
  color: white;
}

.loading {
  text-align: center;
  padding: 40px 20px;
  color: white;
  grid-column: 1 / -1;
}

.spinner {
  width: 30px;
  height: 30px;
  border: 3px solid rgba(255, 255, 255, 0.3);
  border-top: 3px solid white;
  border-radius: 50%;
  margin: 0 auto 15px;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

.no-results {
  text-align: center;
  padding: 30px;
  color: rgba(255, 255, 255, 0.6);
  grid-column: 1 / -1;
}

.remote-controls {
  position: fixed;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  display: none;
  gap: 10px;
  background: rgba(0, 0, 0, 0.7);
  padding: 15px;
  border-radius: 20px;
  backdrop-filter: blur(10px);
  z-index: 1000;
}

.remote-btn {
  width: 50px;
  height: 50px;
  background: rgba(255, 255, 255, 0.2);
  border: none;
  border-radius: 12px;
  color: white;
  font-size: 1.2rem;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
}

.remote-btn:active {
  background: rgba(255, 255, 255, 0.3);
  transform: scale(0.95);
}

@media (max-width: 768px) {
  .channels-grid {
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
  }
}

@media (max-width: 480px) {
  .channels-grid {
    grid-template-columns: 1fr;
  }
  
  .header h1 {
    font-size: 1.8rem;
  }
  
  .quality-selector {
    flex-direction: column;
  }
}

@media (min-width: 1024px) {
  .remote-controls {
    display: flex;
  }
}

/* Ø±Ø³Ø§Ù„Ø© ØªÙ†Ø¨ÙŠÙ‡ Ø³Ø±ÙŠØ¹Ø© */
.quick-notice {
  position: fixed;
  bottom: 100px;
  left: 50%;
  transform: translateX(-50%);
  background: rgba(15, 23, 42, 0.95);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 12px;
  padding: 12px 24px;
  color: white;
  font-weight: 600;
  backdrop-filter: blur(10px);
  z-index: 1001;
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.3s, visibility 0.3s;
  text-align: center;
  max-width: 90%;
}

.quick-notice.show {
  opacity: 1;
  visibility: visible;
}
</style>
</head>

<body>

<header class="header glass-panel">
  <h1>Leo TV</h1>
  <div class="subtitle">Ù…Ù†ØµØ© IPTV Ù…ØªØ·ÙˆØ±Ø© - Ø´Ø§Ù‡Ø¯ Ù‚Ù†ÙˆØ§ØªÙƒ Ø§Ù„Ù…ÙØ¶Ù„Ø©</div>
</header>

<section class="search-section glass-panel">
  <input type="text" id="search-input" class="search-box" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ù‚Ù†Ø§Ø©...">
</section>

<div class="filter-buttons" id="filter-buttons">
  <button class="filter-btn active" data-filter="all">
    <i class="fas fa-list"></i> Ø§Ù„ÙƒÙ„
  </button>
  <button class="filter-btn" data-filter="Ø±ÙŠØ§Ø¶ÙŠ">
    <i class="fas fa-futbol"></i> Ø±ÙŠØ§Ø¶ÙŠØ©
  </button>
  <button class="filter-btn" data-filter="ØªØ±ÙÙŠÙ‡ÙŠ">
    <i class="fas fa-film"></i> ØªØ±ÙÙŠÙ‡ÙŠØ©
  </button>
  <button class="filter-btn" data-filter="Ø£Ø®Ø¨Ø§Ø±">
    <i class="fas fa-newspaper"></i> Ø£Ø®Ø¨Ø§Ø±
  </button>
</div>

<section class="channels-section glass-panel">
  <div class="channels-grid" id="channels">
    <!-- Ø§Ù„Ù‚Ù†ÙˆØ§Øª ÙŠØªÙ… Ø¥Ø¶Ø§ÙØªÙ‡Ø§ Ù‡Ù†Ø§ -->
  </div>
  
  <div id="loading" class="loading" style="display: none;">
    <div class="spinner"></div>
    Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚Ù†ÙˆØ§Øª...
  </div>
  
  <div id="no-results" class="no-results" style="display: none;">
    <i class="fas fa-tv"></i>
    <p>Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù‚Ù†ÙˆØ§Øª ØªØ·Ø§Ø¨Ù‚ Ø¨Ø­Ø«Ùƒ</p>
  </div>
</section>

<div class="remote-controls">
  <button class="remote-btn" onclick="navigateRemote('up')">â¬†ï¸</button>
  <div style="display: flex; flex-direction: column; gap: 5px;">
    <button class="remote-btn" onclick="navigateRemote('left')">â¬…ï¸</button>
    <button class="remote-btn" onclick="activateCurrent()">âºï¸</button>
    <button class="remote-btn" onclick="navigateRemote('right')">â¡ï¸</button>
  </div>
  <button class="remote-btn" onclick="navigateRemote('down')">â¬‡ï¸</button>
</div>

<!-- Ø±Ø³Ø§Ù„Ø© ØªÙ†Ø¨ÙŠÙ‡ -->
<div class="quick-notice" id="quick-notice">
  <span id="notice-text">Ø¬Ø§Ø±ÙŠ ÙØªØ­ Ø§Ù„Ù‚Ù†Ø§Ø©...</span>
</div>

<script>
// Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‚Ù†ÙˆØ§Øª Ù…Ø¹ Ø±ÙˆØ§Ù‚Ø¹ m3u8
const channelsData = [
  {
    name: "beIN SPORT 1",
    logo: "https://upload.wikimedia.org/wikipedia/commons/thumb/e/e8/Bein_Sports_1_logo.svg/1200px-Bein_Sports_1_logo.svg.png",
    group: "beIN Sports",
    category: "Ø±ÙŠØ§Ø¶ÙŠ",
    qualities: {
      "SD": "https://cdn-df-ios.sportdigital.tv/stream/hls/bein1/bein1-360p.m3u8",
      "HD": "https://cdn-df-ios.sportdigital.tv/stream/hls/bein1/bein1-720p.m3u8",
      "FHD": "https://cdn-df-ios.sportdigital.tv/stream/hls/bein1/bein1-1080p.m3u8"
    },
    server: "Leo Servers",
    status: "Ù…Ø¨Ø§Ø´Ø±"
  },
  {
    name: "beIN SPORT 2",
    logo: "https://upload.wikimedia.org/wikipedia/commons/thumb/e/e8/Bein_Sports_1_logo.svg/1200px-Bein_Sports_1_logo.svg.png",
    group: "beIN Sports",
    category: "Ø±ÙŠØ§Ø¶ÙŠ",
    qualities: {
      "SD": "https://cdn-df-ios.sportdigital.tv/stream/hls/bein2/bein2-360p.m3u8",
      "HD": "https://cdn-df-ios.sportdigital.tv/stream/hls/bein2/bein2-720p.m3u8",
      "FHD": "https://cdn-df-ios.sportdigital.tv/stream/hls/bein2/bein2-1080p.m3u8"
    },
    server: "Leo Servers",
    status: "Ù…Ø¨Ø§Ø´Ø±"
  },
  {
    name: "beIN SPORT 3",
    logo: "https://upload.wikimedia.org/wikipedia/commons/thumb/e/e8/Bein_Sports_1_logo.svg/1200px-Bein_Sports_1_logo.svg.png",
    group: "beIN Sports",
    category: "Ø±ÙŠØ§Ø¶ÙŠ",
    qualities: {
      "SD": "https://cdn-df-ios.sportdigital.tv/stream/hls/bein3/bein3-360p.m3u8",
      "HD": "https://cdn-df-ios.sportdigital.tv/stream/hls/bein3/bein3-720p.m3u8",
      "FHD": "https://cdn-df-ios.sportdigital.tv/stream/hls/bein3/bein3-1080p.m3u8"
    },
    server: "Leo Servers",
    status: "Ù…Ø¨Ø§Ø´Ø±"
  },
  {
    name: "Ù‚Ù†Ø§Ø© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",
    logo: "https://upload.wikimedia.org/wikipedia/commons/thumb/6/69/Al_Arabiya_Logo_2016.svg/1200px-Al_Arabiya_Logo_2016.svg.png",
    group: "Ø£Ø®Ø¨Ø§Ø±",
    category: "Ø£Ø®Ø¨Ø§Ø±",
    qualities: {
      "SD": "https://live.alarabiya.net/alarabiapublish/alarabiya.smil/playlist.m3u8",
      "HD": "https://live.alarabiya.net/alarabiapublish/alarabiya.smil/playlist.m3u8",
      "FHD": "https://live.alarabiya.net/alarabiapublish/alarabiya.smil/playlist.m3u8"
    },
    server: "Leo Servers",
    status: "Ù…Ø¨Ø§Ø´Ø±"
  },
  {
    name: "MBC 1",
    logo: "https://upload.wikimedia.org/wikipedia/commons/thumb/2/27/MBC_1_logo_%282021%29.png/800px-MBC_1_logo_%282021%29.png",
    group: "ØªØ±ÙÙŠÙ‡",
    category: "ØªØ±ÙÙŠÙ‡ÙŠ",
    qualities: {
      "SD": "https://shls-mbc1-prod-dub.shahid.net/out/v1/73d3e1d29d2f4ed7a2f6b8a9f8f8f8f8/index.m3u8",
      "HD": "https://shls-mbc1-prod-dub.shahid.net/out/v1/73d3e1d29d2f4ed7a2f6b8a9f8f8f8f8/index_2.m3u8",
      "FHD": "https://shls-mbc1-prod-dub.shahid.net/out/v1/73d3e1d29d2f4ed7a2f6b8a9f8f8f8f8/index_4.m3u8"
    },
    server: "Leo Servers",
    status: "Ù…Ø¨Ø§Ø´Ø±"
  },
  {
    name: "Ø±ÙˆØªØ§Ù†Ø§ Ø®Ù„ÙŠØ¬ÙŠØ©",
    logo: "https://upload.wikimedia.org/wikipedia/commons/thumb/5/5d/Rotana_Khalijia_Logo.png/800px-Rotana_Khalijia_Logo.png",
    group: "ØªØ±ÙÙŠÙ‡",
    category: "ØªØ±ÙÙŠÙ‡ÙŠ",
    qualities: {
      "SD": "https://rotana-gulf.rotana.net/rotana-gulf/rotana-gulf_1.m3u8",
      "HD": "https://rotana-gulf.rotana.net/rotana-gulf/rotana-gulf_2.m3u8",
      "FHD": "https://rotana-gulf.rotana.net/rotana-gulf/rotana-gulf_4.m3u8"
    },
    server: "Leo Servers",
    status: "Ù…Ø¨Ø§Ø´Ø±"
  },
  {
    name: "Ø§Ù„ÙƒØ£Ø³",
    logo: "https://upload.wikimedia.org/wikipedia/commons/thumb/8/8a/Alkass_logo.png/800px-Alkass_logo.png",
    group: "Ø±ÙŠØ§Ø¶Ø©",
    category: "Ø±ÙŠØ§Ø¶ÙŠ",
    qualities: {
      "SD": "https://alkass.alkass.net/alkass/alkass_1.m3u8",
      "HD": "https://alkass.alkass.net/alkass/alkass_2.m3u8",
      "FHD": "https://alkass.alkass.net/alkass/alkass_4.m3u8"
    },
    server: "Leo Servers",
    status: "Ù…Ø¨Ø§Ø´Ø±"
  },
  {
    name: "CNN Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",
    logo: "https://upload.wikimedia.org/wikipedia/commons/thumb/8/8f/CNN_Arabic_2017_logo.svg/1200px-CNN_Arabic_2017_logo.svg.png",
    group: "Ø£Ø®Ø¨Ø§Ø±",
    category: "Ø£Ø®Ø¨Ø§Ø±",
    qualities: {
      "SD": "https://cnn-cnninternational-1-gb.samsung.wurl.com/manifest/playlist.m3u8",
      "HD": "https://cnn-cnninternational-1-gb.samsung.wurl.com/manifest/playlist_2.m3u8",
      "FHD": "https://cnn-cnninternational-1-gb.samsung.wurl.com/manifest/playlist_4.m3u8"
    },
    server: "Leo Servers",
    status: "Ù…Ø¨Ø§Ø´Ø±"
  }
];

// Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø©
let allChannels = [];
let filteredChannels = [];
let currentFilter = "all";
let currentFocusIndex = 0;
let channelCards = [];
let filterButtons = [];
let selectedQualities = {}; // Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ø¬ÙˆØ¯Ø© Ø§Ù„Ù…Ø®ØªØ§Ø±Ø© Ù„ÙƒÙ„ Ù‚Ù†Ø§Ø©

// ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
function initApp() {
  allChannels = channelsData;
  filteredChannels = [...allChannels];
  
  // ØªØ¹ÙŠÙŠÙ† Ø¬ÙˆØ¯Ø© Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ù„ÙƒÙ„ Ù‚Ù†Ø§Ø© (HD)
  allChannels.forEach(channel => {
    selectedQualities[channel.name] = "HD";
  });
  
  displayChannels(allChannels);
  setupEventListeners();
  setupRemoteNavigation();
}

// Ø¹Ø±Ø¶ Ø§Ù„Ù‚Ù†ÙˆØ§Øª
function displayChannels(channels) {
  const grid = document.getElementById("channels");
  
  if (channels.length === 0) {
    document.getElementById("no-results").style.display = "block";
    grid.innerHTML = "";
    return;
  }
  
  document.getElementById("no-results").style.display = "none";
  
  const groupedChannels = {};
  channels.forEach(ch => {
    if (!groupedChannels[ch.group]) {
      groupedChannels[ch.group] = [];
    }
    groupedChannels[ch.group].push(ch);
  });
  
  let html = "";
  
  for (const group in groupedChannels) {
    html += `<div class="group-header">${group}</div>`;
    
    groupedChannels[group].forEach(ch => {
      const selectedQuality = selectedQualities[ch.name] || "HD";
      
      html += `
        <div class="channel-card" tabindex="0" data-channel="${ch.name}">
          <img src="${ch.logo}" alt="${ch.name}" class="channel-logo" onerror="this.onerror=null; this.src='https://via.placeholder.com/55x55/1e293b/ffffff?text=${ch.name.substring(0,2)}';">
          <div class="quality-badge">${selectedQuality}</div>
          <div class="live-badge">LIVE</div>
          <div class="channel-name">${ch.name}</div>
          <div class="channel-info">${ch.server}</div>
          
          <div class="quality-selector">
            <button class="quality-btn SD ${selectedQuality === 'SD' ? 'active' : ''}" 
                    onclick="event.stopPropagation(); selectQuality('${ch.name}', 'SD')">
              SD
            </button>
            <button class="quality-btn HD ${selectedQuality === 'HD' ? 'active' : ''}" 
                    onclick="event.stopPropagation(); selectQuality('${ch.name}', 'HD')">
              HD
            </button>
            <button class="quality-btn FHD ${selectedQuality === 'FHD' ? 'active' : ''}" 
                    onclick="event.stopPropagation(); selectQuality('${ch.name}', 'FHD')">
              FHD
            </button>
          </div>
        </div>
      `;
    });
  }
  
  grid.innerHTML = html;
  
  // Ø¥Ø¶Ø§ÙØ© Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ù†Ù‚Ø± Ù„Ù„Ø¨Ø·Ø§Ù‚Ø§Øª (Ù„Ù„ØªØ´ØºÙŠÙ„ Ø¨Ø§Ù„Ø¬ÙˆØ¯Ø© Ø§Ù„Ù…Ø®ØªØ§Ø±Ø©)
  document.querySelectorAll('.channel-card').forEach(card => {
    card.addEventListener('click', function(e) {
      // ÙÙ‚Ø· Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø²Ø± Ø§Ù„Ø¬ÙˆØ¯Ø©
      if (!e.target.classList.contains('quality-btn') && !e.target.closest('.quality-btn')) {
        const channelName = this.dataset.channel;
        const quality = selectedQualities[channelName] || "HD";
        playChannel(channelName, quality);
      }
    });
  });
  
  setupRemoteNavigation();
}

// Ø§Ø®ØªÙŠØ§Ø± Ø¬ÙˆØ¯Ø© Ù…Ø¹ÙŠÙ†Ø©
function selectQuality(channelName, quality) {
  selectedQualities[channelName] = quality;
  
  // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©
  const card = document.querySelector(`[data-channel="${channelName}"]`);
  if (card) {
    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨Ø§Ø¯Ø¬
    const badge = card.querySelector('.quality-badge');
    if (badge) badge.textContent = quality;
    
    // ØªØ­Ø¯ÙŠØ« Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¬ÙˆØ¯Ø©
    const buttons = card.querySelectorAll('.quality-btn');
    buttons.forEach(btn => {
      btn.classList.remove('active');
      if (btn.textContent.trim() === quality) {
        btn.classList.add('active');
      }
    });
  }
  
  showNotice(`ØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø¬ÙˆØ¯Ø© ${quality} Ù„Ù€ ${channelName}`);
}

// ØªØ´ØºÙŠÙ„ Ø§Ù„Ù‚Ù†Ø§Ø© (Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø£ØµÙ„ÙŠØ© - Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø§Ù„Ù…Ø¨Ø§Ø´Ø± Ù„Ù„Ø±Ø§Ø¨Ø·)
function playChannel(channelName, quality) {
  const channel = allChannels.find(ch => ch.name === channelName);
  
  if (!channel) {
    showNotice(`Ø§Ù„Ù‚Ù†Ø§Ø© ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø©: ${channelName}`);
    return;
  }
  
  const url = channel.qualities[quality];
  
  if (url && url.startsWith('http')) {
    showNotice(`Ø¬Ø§Ø±ÙŠ ÙØªØ­ ${channelName} Ø¨Ø¬ÙˆØ¯Ø© ${quality}...`);
    
    // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø§Ù„Ù…Ø¨Ø§Ø´Ø± Ø¥Ù„Ù‰ Ø±Ø§Ø¨Ø· m3u8 - ÙŠØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ù…ØªØµÙØ­
    window.location.href = url;
    
    // Ø£Ùˆ ÙØªØ­ ÙÙŠ Ù†Ø§ÙØ°Ø©/ØªØ¨ÙˆÙŠØ¨ Ø¬Ø¯ÙŠØ¯
    // window.open(url, '_blank');
    
  } else {
    showNotice(`Ø±Ø§Ø¨Ø· Ø§Ù„Ø¨Ø« ØºÙŠØ± Ù…ØªØ§Ø­ Ù„Ù€ ${channelName}`);
  }
}

// Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø³Ø±ÙŠØ¹Ø©
function showNotice(message) {
  const notice = document.getElementById('quick-notice');
  const text = document.getElementById('notice-text');
  
  text.textContent = message;
  notice.classList.add('show');
  
  setTimeout(() => {
    notice.classList.remove('show');
  }, 2000);
}

// ØªØµÙÙŠØ© Ø§Ù„Ù‚Ù†ÙˆØ§Øª
function filterChannels(category) {
  currentFilter = category;
  
  filterButtons.forEach(btn => {
    btn.classList.remove('active');
    if (btn.dataset.filter === category) {
      btn.classList.add('active');
    }
  });
  
  if (category === "all") {
    filteredChannels = [...allChannels];
  } else {
    filteredChannels = allChannels.filter(ch => ch.category === category);
  }
  
  // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¨Ø­Ø« Ø£ÙŠØ¶Ù‹Ø§
  applySearch();
}

// ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¨Ø­Ø«
function applySearch() {
  const searchTerm = document.getElementById('search-input').value.trim().toLowerCase();
  
  if (searchTerm === '') {
    displayChannels(filteredChannels);
  } else {
    const searchResults = filteredChannels.filter(channel => 
      channel.name.toLowerCase().includes(searchTerm) || 
      channel.group.toLowerCase().includes(searchTerm)
    );
    displayChannels(searchResults);
  }
}

// Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„ØªÙ†Ù‚Ù„ Ø¨Ø§Ù„Ø£Ø²Ø±Ø§Ø±
function setupRemoteNavigation() {
  channelCards = Array.from(document.querySelectorAll('.channel-card'));
  
  if (channelCards.length === 0) return;
  
  // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ØªØ±ÙƒÙŠØ² Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª
  channelCards.forEach(card => card.classList.remove('focused'));
  
  // Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªØ±ÙƒÙŠØ² Ù„Ù„Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰
  if (channelCards.length > 0) {
    currentFocusIndex = 0;
    channelCards[currentFocusIndex].classList.add('focused');
    channelCards[currentFocusIndex].focus();
  }
}

// Ø§Ù„ØªÙ†Ù‚Ù„ Ø¹Ù† Ø¨Ø¹Ø¯
function navigateRemote(direction) {
  if (channelCards.length === 0) return;
  
  const oldIndex = currentFocusIndex;
  let newIndex = currentFocusIndex;
  const columns = window.innerWidth >= 768 ? 2 : 1;
  
  switch(direction) {
    case 'up':
      newIndex = Math.max(0, currentFocusIndex - columns);
      break;
    case 'down':
      newIndex = Math.min(channelCards.length - 1, currentFocusIndex + columns);
      break;
    case 'left':
      newIndex = Math.max(0, currentFocusIndex - 1);
      break;
    case 'right':
      newIndex = Math.min(channelCards.length - 1, currentFocusIndex + 1);
      break;
  }
  
  if (newIndex !== oldIndex) {
    channelCards[oldIndex].classList.remove('focused');
    channelCards[newIndex].classList.add('focused');
    channelCards[newIndex].focus();
    currentFocusIndex = newIndex;
    
    // Ø§Ù„ØªÙ…Ø±ÙŠØ± Ù„Ø±Ø¤ÙŠØ© Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©
    channelCards[newIndex].scrollIntoView({
      behavior: 'smooth',
      block: 'center'
    });
  }
}

// ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ© (ØªØ´ØºÙŠÙ„ Ø§Ù„Ù‚Ù†Ø§Ø©)
function activateCurrent() {
  if (channelCards.length > 0) {
    const channelName = channelCards[currentFocusIndex].dataset.channel;
    const quality = selectedQualities[channelName] || "HD";
    playChannel(channelName, quality);
  }
}

// Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ø³ØªÙ…Ø¹ÙŠ Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
function setupEventListeners() {
  const searchInput = document.getElementById('search-input');
  
  // Ø§Ù„Ø¨Ø­Ø«
  searchInput.addEventListener('input', applySearch);
  
  // Ø§Ù„ØªØ±ÙƒÙŠØ² Ø¹Ù„Ù‰ Ø§Ù„Ø¨Ø­Ø«
  searchInput.addEventListener('focus', () => {
    channelCards.forEach(card => card.classList.remove('focused'));
  });
  
  // Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØµÙÙŠØ©
  filterButtons = Array.from(document.querySelectorAll('.filter-btn'));
  filterButtons.forEach(btn => {
    btn.addEventListener('click', function() {
      filterChannels(this.dataset.filter);
    });
  });
  
  // Ø§Ù„ØªÙ†Ù‚Ù„ Ø¨Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙØ§ØªÙŠØ­
  document.addEventListener('keydown', function(e) {
    if (document.activeElement === searchInput) return;
    
    switch(e.key) {
      case 'ArrowUp':
        e.preventDefault();
        navigateRemote('up');
        break;
      case 'ArrowDown':
        e.preventDefault();
        navigateRemote('down');
        break;
      case 'ArrowLeft':
        e.preventDefault();
        navigateRemote('left');
        break;
      case 'ArrowRight':
        e.preventDefault();
        navigateRemote('right');
        break;
      case 'Enter':
        e.preventDefault();
        activateCurrent();
        break;
      case 'Escape':
        searchInput.focus();
        break;
    }
  });
  
  // Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡ Ø§Ù„ØªØ­ÙƒÙ… Ø¹Ù† Ø¨Ø¹Ø¯ Ø­Ø³Ø¨ Ø­Ø¬Ù… Ø§Ù„Ø´Ø§Ø´Ø©
  window.addEventListener('resize', () => {
    const remoteControls = document.querySelector('.remote-controls');
    if (window.innerWidth >= 1024) {
      remoteControls.style.display = 'flex';
    } else {
      remoteControls.style.display = 'none';
    }
    
    setupRemoteNavigation();
  });
}

// Ø¨Ø¯Ø¡ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
window.addEventListener('DOMContentLoaded', initApp);
</script>

</body>
</html>
